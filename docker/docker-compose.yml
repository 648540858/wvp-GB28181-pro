version: '3'
services:
  wvp:
    build:
      context: ./wvp
      args:
        gitUrl: "https://gitee.com/pan648540858"
        gitBranch: "wvp-28181-2.0"
    container_name: wvp
    restart: always
    ports:
      - "25060:5060/tcp"
      - "25060:5060/udp"
      - "18080:18080"
    volumes:
      - ./wvp/config/:/opt/wvp/config/
      - ./logs/wvp:/opt/wvp/logs/
      - /videocenter:/videocenter
    environment:
      TZ: "Asia/Shanghai"
      LANG: "en_US.UTF-8"
    depends_on:
      - zlm
  zlm:
    build:
      context: ./zlm
      args:
        MODEL: Release
        gitUrl: "https://gitee.com/xia-chu/ZLMediaKit.git"
        gitBranch: "master"
    container_name: zlm
    restart: always
    ports:
      - "8082:8082"
      - "7443:7443"
      - "8000:8000"
      - "10000:10000/tcp"
      - "10000:10000/udp"
      - "30000-30100:30000-30100/tcp"
      - "30000-30100:30000-30100/udp"
    volumes:
      - ./zlm/config/config.ini:/opt/media/conf/config.ini
      - ./zlm/config/default.pem:/opt/media/bin/default.pem
      - ./logs/zlm:/opt/media/bin/log/
      - /videocenter:/videocenter
